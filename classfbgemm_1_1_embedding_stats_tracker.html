<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fbgemm_gpu: EmbeddingStatsTracker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">fbgemm_gpu
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacefbgemm.html">fbgemm</a></li><li class="navelem"><a class="el" href="classfbgemm_1_1_embedding_stats_tracker.html">EmbeddingStatsTracker</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classfbgemm_1_1_embedding_stats_tracker-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">EmbeddingStatsTracker Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;EmbeddingStatsTracker.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfbgemm_1_1_embedding_stats_tracker_1_1_access_pattern_entry.html">AccessPatternEntry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfbgemm_1_1_embedding_stats_tracker_1_1_access_pattern_entry_hash.html">AccessPatternEntryHash</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ad8ed01ff3ff33333d8e19db4d2818bb6" id="r_ad8ed01ff3ff33333d8e19db4d2818bb6"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6">DataType</a> </td></tr>
<tr class="separator:ad8ed01ff3ff33333d8e19db4d2818bb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a94a1081b6e9aa01dcf27e19eefbfb36c" id="r_a94a1081b6e9aa01dcf27e19eefbfb36c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a94a1081b6e9aa01dcf27e19eefbfb36c">recordPattern</a> (int64_t rows, int64_t dims, <a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6">DataType</a> input_data_type, <a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6">DataType</a> output_data_type, int64_t batch_size, int64_t bag_size)</td></tr>
<tr class="separator:a94a1081b6e9aa01dcf27e19eefbfb36c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad20897c5c8bd47f5d4005989bead0e55" id="r_ad20897c5c8bd47f5d4005989bead0e55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad20897c5c8bd47f5d4005989bead0e55">reset</a> ()</td></tr>
<tr class="separator:ad20897c5c8bd47f5d4005989bead0e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a30047eff94f3e2c33172ffe331af0744" id="r_a30047eff94f3e2c33172ffe331af0744"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30047eff94f3e2c33172ffe331af0744">dataTypeToString</a> (<a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6">DataType</a> type)</td></tr>
<tr class="separator:a30047eff94f3e2c33172ffe331af0744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb964149ceef24642fcdcedf82f928f7" id="r_abb964149ceef24642fcdcedf82f928f7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classfbgemm_1_1_embedding_stats_tracker.html">EmbeddingStatsTracker</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb964149ceef24642fcdcedf82f928f7">getInstance</a> ()</td></tr>
<tr class="separator:abb964149ceef24642fcdcedf82f928f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class provides functionality to track and analyze statistics about embedding tables access pattern in the FBGEMM kernels. It tracks every access pattern inside the fbgemm kernel, collecting statistics such as batch size, embedding dimensions, bag size, and data type to provide insights into embedding table usage patterns.</p>
<p>To enable statistics tracking for FBGEMM, set the following environment variables:</p><ul>
<li>FBGEMM_STATS_ENABLE: Enables tracking. Set to 1 to enable and unset to disable. </li>
</ul>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="ad8ed01ff3ff33333d8e19db4d2818bb6" name="ad8ed01ff3ff33333d8e19db4d2818bb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ed01ff3ff33333d8e19db4d2818bb6">&#9670;&#160;</a></span>DataType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6">DataType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel strong">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Supported data types for embedding tables. </p>
<p>This enum defines the various data types that can be used for storing embedding table values. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a30047eff94f3e2c33172ffe331af0744" name="a30047eff94f3e2c33172ffe331af0744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30047eff94f3e2c33172ffe331af0744">&#9670;&#160;</a></span>dataTypeToString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string dataTypeToString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6">DataType</a></td>          <td class="paramname"><span class="paramname"><em>type</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert <a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6" title="Supported data types for embedding tables.">DataType</a> enum to string representation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The <a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6" title="Supported data types for embedding tables.">DataType</a> enum value to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::string The string representation of the data type</dd></dl>
<p>This function is used for logging to provide human-readable names for the different data types. </p>

</div>
</div>
<a id="abb964149ceef24642fcdcedf82f928f7" name="abb964149ceef24642fcdcedf82f928f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb964149ceef24642fcdcedf82f928f7">&#9670;&#160;</a></span>getInstance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfbgemm_1_1_embedding_stats_tracker.html">EmbeddingStatsTracker</a> &amp; getInstance </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the singleton instance of <a class="el" href="classfbgemm_1_1_embedding_stats_tracker.html" title="Statistics tracker for FBGEMM kernel embedding tables.">EmbeddingStatsTracker</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>Reference to the singleton instance</dd></dl>
<p>This class follows the singleton pattern to ensure that only one instance of the statistics tracker exists throughout the application. All code should access the tracker through this method. </p>

</div>
</div>
<a id="a94a1081b6e9aa01dcf27e19eefbfb36c" name="a94a1081b6e9aa01dcf27e19eefbfb36c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94a1081b6e9aa01dcf27e19eefbfb36c">&#9670;&#160;</a></span>recordPattern()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void recordPattern </td>
          <td>(</td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>rows</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>dims</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6">DataType</a></td>          <td class="paramname"><span class="paramname"><em>input_data_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ad8ed01ff3ff33333d8e19db4d2818bb6">DataType</a></td>          <td class="paramname"><span class="paramname"><em>output_data_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>batch_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>bag_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Record inference statistics for an embedding table. </p>
<p>Tracks every inference operation inside the fbgemm kernel. This method is called during embedding lookups to collect usage statistics which can be used for performance analysis and optimization.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rows</td><td>Number of rows in the table (data_size) </td></tr>
    <tr><td class="paramname">dims</td><td>Embedding dimension </td></tr>
    <tr><td class="paramname">input_data_type</td><td>Data type used for input </td></tr>
    <tr><td class="paramname">output_data_type</td><td>Data type used for output </td></tr>
    <tr><td class="paramname">batch_size</td><td>Number of output rows (output_size) </td></tr>
    <tr><td class="paramname">bag_size</td><td>Bag size (pooling factor) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad20897c5c8bd47f5d4005989bead0e55" name="ad20897c5c8bd47f5d4005989bead0e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad20897c5c8bd47f5d4005989bead0e55">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void reset </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset all statistics. </p>
<p>Clears all recorded statistics and resets the internal state. This can be useful when starting a new profiling session or when you want to discard previously collected data. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/__w/FBGEMM/FBGEMM/src/<b>EmbeddingStatsTracker.h</b></li>
<li>/__w/FBGEMM/FBGEMM/src/<b>EmbeddingStatsTracker.cc</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
